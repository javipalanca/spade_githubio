---
// Navbar component
import DarkModeToggle from './DarkModeToggle.astro';
const baseUrl = import.meta.env.BASE_URL;
---

<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
    <div class="scroll-progress-bar"></div>
    <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="#top">
            <img src={`${baseUrl}img/spade-agent-network-fixed.svg`} alt="SPADE Logo" height="40" class="me-2">
            <span class="fw-bold" style="color: var(--primary-color);">SPADE</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#features">Features</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#examples">Examples</a>
                </li>                
                <li class="nav-item">
                    <a class="nav-link" href="#plugins">Plugins</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#docs">Documentation</a>
                </li>                
                <li class="nav-item">
                    <a class="nav-link" href="#usecases">Use Cases</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link nav-link-ai" href="#spade-llm">
                        <i class="bi bi-brain me-1"></i>SPADE-LLM
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#faq">FAQ</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#news">News</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#interactive-demo">Demo</a>
                </li>
                <li class="nav-item">
                    <div class="ms-2">
                        <DarkModeToggle small={true} />
                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link btn btn-primary text-white ms-lg-3 px-3" href="https://github.com/javipalanca/spade">GitHub</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<style>
    .navbar {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1030;
        transition:
            background-color 0.3s ease,
            box-shadow 0.3s ease;
    }

    .navbar.scrolled {
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    /* Dark mode styles */
    :global(body.dark-mode) .navbar {
        background-color: var(--dark-card-bg) !important;
        color: var(--dark-text) !important;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5) !important;
    }

    :global(body.dark-mode) .navbar.scrolled {
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    }

    :global(body.dark-mode) .navbar-light .navbar-toggler {
        background-color: var(--dark-card-bg) !important;
        border-color: var(--dark-border) !important;
    }

    :global(body.dark-mode) .navbar-light .navbar-toggler-icon {
        filter: invert(1) !important;
    }

    :global(body.dark-mode) .navbar-light .navbar-nav .nav-link {
        color: var(--dark-text);
    }

    /* AI Agents navigation link styling */
    .nav-link-ai {
        background: linear-gradient(135deg, #8e44ad, #9b59b6);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 600;
        position: relative;
    }

    .nav-link-ai::after {
        content: '';
        position: absolute;
        bottom: -3px;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(135deg, #8e44ad, #9b59b6);
        border-radius: 1px;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .nav-link-ai:hover::after {
        opacity: 1;
    }

    :global(body.dark-mode) .nav-link-ai {
        background: linear-gradient(135deg, #a569bd, #bb8fce);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    /* Active section highlighting */
    .nav-link.active {
        color: var(--primary-color) !important;
        font-weight: 600;
        position: relative;
    }

    .nav-link.active::after {
        content: '';
        position: absolute;
        bottom: -3px;
        left: 0;
        right: 0;
        height: 2px;
        background: var(--primary-color);
        border-radius: 1px;
        opacity: 1;
    }

    /* Dark mode active styles */
    :global(body.dark-mode) .nav-link.active {
        color: #3498db !important;
    }

    :global(body.dark-mode) .nav-link.active::after {
        background: #3498db;
    }

    /* Special styling for SPADE-LLM when active */
    .nav-link-ai.active {
        background: linear-gradient(135deg, #8e44ad, #9b59b6);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .nav-link-ai.active::after {
        background: linear-gradient(135deg, #8e44ad, #9b59b6);
        opacity: 1;
    }

    /* Scroll Progress Bar */
    .scroll-progress-bar {
        position: absolute;
        top: 0;
        left: 0;
        height: 6px;
        background: linear-gradient(
            90deg,
            #3498db,
            #2ecc71,
            #8e44ad
        );
        width: 0%;
        transition: width 0.1s ease-out;
        z-index: 1031;
        border-radius: 0 4px 4px 0;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }

    /* Dark mode progress bar */
    :global(body.dark-mode) .scroll-progress-bar {
        background: linear-gradient(
            90deg,
            #205080,
            #1a573a,
            #5d4e75
        );
        box-shadow: 0 1px 3px rgba(255, 255, 255, 0.1);
    }
</style>
